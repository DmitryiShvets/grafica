# Курс по компьютерной графике 2023.
## Лабораторная работа №1 Работа в графическом режиме
Построение графика функции. 
Задаются: диапазон значений, функция, необходимо построить график с возможностью масштабирования при изменении размера окна вывода – в максимальных и минимальных точках график приближается к  верхней и нижней границам графического окна. Обязательный тест – sin(x) и x^2.
Необходимо предусмотреть выбор функций из некоторого списка. В функцию построения графика функцию передавать как параметр.
Не использовать стандартные функции построения графиков.
Язык программирования - любой.

## Лабораторная работа №2. Цветовые пространства. Преобразование цветовых пространств.
Работа в командах! Необходимо записаться!

1) Преобразовать изображение из RGB в оттенки серого. Реализовать два варианта формулы с учетом разных вкладов R, G и B в интенсивность (см презентацию). Затем найти разность полученных полутоновых изображений. Построить гистограммы интенсивности после одного и второго преобразования.

2) Выделить из полноцветного изображения каждый из каналов R, G, B  и вывести результат. Построить гистограмму по цветам (3 штуки).

3) Преобразовать изображение из RGB в HSV. Добавить возможность изменять значения оттенка, насыщенности и яркости. Результат сохранять в файл, предварительно преобразовав обратно.

В качестве ответа принимается ссылка на репозиторий.

## Лабораторная работа №3. Растровые алгоритмы
Работа в командах.
Задание 1. Заливка и выделение границы.

1а) Рекурсивный алгоритм заливки на основе серий пикселов (линий)  заданным цветом.

1б) Рекурсивный алгоритм заливки на основе серий пикселов (линий)  рисунком из графического файла. Файл можно загрузить встроенными средствами и затем считывать точки изображения для использования в заливке. Рассмотреть случаи когда файл небольшого размера и заливается циклически и когда большой. Масштабировать не нужно.  Область рисуется мышкой. Область произвольной формы. Внутри могут быть отверстия. Точка, с которой начинается заливка, задается щелчком мыши.

1в) Выделение границы связной области. На вход подается изображение. Граница связной области задается одним цветом. Имея начальную точку границы организовать ее обход, занося точки в список в порядке обхода. Начальную точку границы можно получать любым способом. Для контроля полученную границу прорисовать поверх исходного изображения.

Задание 2. Реализовать рисование отрезка: целочисленным алгоритмом Брезенхема  и алгоритмом ВУ

Задание 3. Выполнить градиентное окрашивание произвольного треугольника, у которого все три вершины разного цвета, используя алгоритм растеризации треугольника.

В качестве ответа принимается ссылка на репозиторий.

## Лабораторная работа №4. Аффинные преобразования на плоскости и вспомогательные алгоритмы
Приложение должно быть интерактивным. Примитивы задаются мышкой ( а не с клавиатуры). 

Программа должна содержать следующие возможности:

- Задать текущий примитив: точка, ребро (отрезок), полигон (мин требование -- квадрат). Они рисуются мышкой.
- Очистить сцену.
- Применение аффинных преобразований к полигону: смещение на dx, dy; поворот вокруг произвольной точки (точка задается пользователем мышкой) и/или вокруг своего центра; масштабирование относительно произвольной точки (точка задается пользователем мышкой) и/или относительно своего центра. Все преобразования должны быть реализованы матрицами!
- Поворот ребра на 90 градусов вокруг своего центра.
- Поиск точки пересечения двух ребер (добавление второго ребра мышкой, динамически).

Программа должна позволять выполнить следующие проверки:
- Принадлежит ли точка выпуклому многоугольнику (задание точки мышкой).
- Принадлежит ли точка невыпуклому многоугольнику (задание точки мышкой).
- Классифицировать положение точки относительно ребра (задание точки мышкой).

## Лабораторная работа №5. L-системы. Алгоритм midpoint displacement. Кривые Безье
1. L-системы
1.a Реализовать программу для построения фрактальных узоров посредством L-систем.

Описание L-систем задается в текстовом файле вида:

<атом> <угол поворота> <начальное направление> 
<правило №1>
<правило №2>
...
Реализовать возможность разветвления в системе (скобки) и возможность добавления случайности.
Предусмотреть масштабирование получаемого набора точек (должен помещаться в окне).
В качестве тестов использовать фракталы из лекций.


1.б На базе 1.а Создать фрактальное дерево с изменением толщины от основания к ветвям, изменением цвета от коричневого к зеленому и случайным изменениям угла у ветвей

2. Алгоритм midpoint displacement
Реализовать алгоритм midpoint displacement для двумерной визуализации горного массива.
Необходимо отображать результаты последовательных шагов алгоритма. Программа должна позволять изменять параметры построения ломаной.

3. Кубические сплайны Безье
Реализовать программу для визуализации составной кубической кривой Безье. 
Программа должна позволять добавлять, удалять  и перемещать опорные точки.

## Индивидуальное задание №1
Обратите внимание,что реализация методов должна соответствовать заявленному в названии.

1. Построение выпуклой оболочки при пошаговом вводе
2. ***Построение выпуклой оболочки методом заворачивания подарка (Джарвиса)***
3. Построение выпуклой оболочки методом Грэхема
4. Построение выпуклой оболочки методом Эндрю (Andrew)
5. Алгоритм QuickHull - Построение выпуклой оболочки
6. Разбиение немонотонных полигонов на монотонные
7. Триангуляция монотонного полигона
8. Триангуляция методом вторгающихся вершин
9. Триангуляция Делоне
10. Объединение выпуклых полигонов
11. Пересечение выпуклых полигонов

## Лабораторная работа №6. Аффинные преобразования в пространстве. Проецирование
Просьба ознакомиться с содержанием лабораторных работ №№7-9. Их реализация базируется на классах из этой лабораторной, планируйте соответственно.

В программе должны присутствовать следующие классы: точка, прямая (ребро), многоугольник (грань), многогранник.

Программа должна содержать следующие возможности:

- Отображение одного из правильных многогранников: тетраэдр, гексаэдр, октаэдр, икосаэдр*, додекаэдр*.
- Применение аффинных преобразований: смещение, поворот, масштаб, с указанием параметров преобразования. Преобразования должны быть реализованы матрицами!

- Отражение относительно выбранной координатной плоскости.
- Масштабирование многогранника относительно своего центра.
- Вращение многогранника вокруг прямой проходящей через центр многогранника, параллельно выбранной координатной оси.
- Поворот вокруг произвольной (заданной координатами двух точек) прямой на заданный угол.
  
Предусмотреть возможность переключения между проекциями :
- перспективной;
- аксонометрической
  
Все преобразования должны быть реализованы матрицами

## Лабораторная работа №7. Построение трёхмерных моделей
На основе Лабораторной работы №6:

1. Загрузка и сохранение модели многогранника из файла
Формат модели должен содержать данные о гранях. Формат файла выбирается программистом.

Необходимо отобразить загруженную модель, позволить применять к ней аффинные преобразования. 

Для тестов можно использовать модели многогранников из Лаб. №6.

2. Построение фигуры вращения
Фигура вращения задаётся тремя параметрами: образующей (набор точек), осью вращения и количеством разбиений. Угол вращений можно вычислить, поделив 360° на количество разбиений.

Программа должна давать возможность задать образующую и построить фигуру вращения относительно выбранной координатной оси с заданным количеством разбиений. Формат модели должен содержать данные о гранях.

Сохранить полученную модель в файл.*

Необходимо загрузить* и отобразить полученную модель, применить к ней аффинные преобразования.

\* – необязательная реализация за бонусные баллы 

3. Построение графика двух переменных
Сегмент поверхности задаётся функцией f(x, y) = z, диапазонами отсечения [x0, x1], [y0, y1] и количеством разбиений по осям (шагом).

Программа должна позволять строить сегмент поверхности, заданный выбранной функцией на заданном диапазоне с заданным количеством разбиений. Формат модели должен содержать данные о гранях. Диапазоны и разбиения можно задавать идентичными для X и Y.

Необходимо отобразить полученную модель, позволить применять к ней аффинные преобразования.

Загрузить и Сохранить полученную модель в файл.* 

## Лабораторная работа №8. Удаление невидимых граней
1. Отсечение нелицевых граней
Изобразить вращающийся объект (созданный ранее) с отсечением нелицевых граней:

Добавить к каждой грани вектор нормали, направленный вовне, относительно объекта. Вектор нормали вычисляется, как векторное произведение векторов, лежащих в плоскости грани.
Задать вектор обзора (Можно только параллельную проекцию использовать, а можно переключаться между параллельной и перспективной). Добавить возможность его изменения.
Реализовать отсечение нелицевых граней с учетом вектора нормали и направления обзора.

2. Алгоритм Z-буфера
Реализовать алгоритм z-буфера для удаления невидимых граней. Направление обзора может быть фиксированным (Можно только параллельную проекцию использовать, а можно переключаться между параллельной и перспективной).

Добавить возможность применять преобразования к отображаемому объекту.
Если объект выпуклый, то необходимо добавить еще несколько объектов для демонстрации корректной работы алгоритма в случае перекрытия.

3. Камера
Добавить объект-камеру. 
Камера задается своим положением, направлением обзора и матрицей проекционного преобразования. 
Получить изображение с камеры, вращая её вокруг статического объекта (Перспективная проекция).

## Лабораторная работа № 9. Освещение и текстурирование
1. Освещение
Реализовать метод Гуро для затенения фигур. (например, для кубика, удаляя нелицевые грани)

- Добавить нормаль к каждой вершине.
- Добавить положение источника света и цвет объекта.
- Вычислить цвет в каждой вершине по модели Ламберта (рассеянную часть).
- Закрасить грань, интерполируя цвет между цветами вершин (билинейная интерполяция).
- Добавить возможность применения аффинных преобразований к объекту.

2. Текстурирование
Реализовать алгоритм наложения текстуры на полигон. (например, для кубика, удаляя нелицевые грани)

- Добавить координаты текстуры к каждой вершине.
- При отрисовке грани интерполировать координаты текстуры между координатами вершин.
- Продемонстрировать текстурирование на правильных многогранниках (тетраэдр, куб, октаэдр).
- Добавить возможность применения преобразований к объекту.

3. Метод плавающего горизонта
- Построить проекцию графика функции 2-х переменных: по алгоритму плавающего горизонта.
- Реализовать отображение линиями или сеткой или треугольниками.
Добавить возможность менять направление обзора.

## Индивидуальное задание №2 Корнуэльская комната
Создать сцену: Корнуэльская комната обязательно в виде большого куба (все грани должны быть). 
Внутри как минимум 1 объект (не прозрачный и не отражающий. На выбор куб или шар. Один точечный источник света. -- 4 балла

За 2-й объект того же вида + 1 балл.

За дополнительный объект другого вида ( шар и куб) ещё + 2 балла.

Добавление зеркального отражения для объекта + 2 балла (по 1-му за каждый тип объекта). С возможностью включать и выключать зеркальность.

Добавление прозрачности + 2 балла (по 1-му за каждый тип объекта). С возможностью включать и выключать прозрачность.

Стена комнаты зеркальная с возможностью выбора стены +1 балл.

Добавление дополнительного источника света (положение можно менять)+ 1 балл.

## Лабораторная работа № 10. Зелёный треугольник
Зелёный треугольник
Прежде чем начать
Если вы используете WebGl, то все необходимые примитивы для работы с канвасами и пользовательским вводом достаются вам бесплатно из html и js.

В противном случае (если вы пишете на C++, Rust, и т.п.), вам необходимо установить библиотеку для работы с окнами и пользовательским вводом. Мы рекомендуем использовать SFML. Код инициализации окна можно взять, например, из презентации.

## Лабораторная работа № 11. Построение различных 2D фигур. Плоское и градиентное закрашивание. Uniform и Atribute
1. Нарисовать четырехугольник, веер, правильный пятиугольник. Для этого меняете количество точек и параметр в glDrawArrays(GL_TRIANGLES, 0, 3); 
2. Закрасить каждую из фигур плоским закрашиванием - цвет задать константой в шейдере.
3. Закрасить каждую из фигур плоским закрашиванием - цвет передать во  фрагментный шейдер через uniform-переменные из основной программы.
4. Закрасить каждую из фигур градиентным закрашиванием (каждая вершина своим цветом)

## Лабораторная работа № 12. Атрибуты, юниформы и трёхмерные объекты в OpenGL. Наложение текстур
1. Градиентный тетраэдр, который можно двигать вдоль осей кнопками клавиатуры. Он должен быть повёрнут так, чтобы было видно, что это тетраэдр.
2. Кубик с наложенной на него текстурой. Текстура должна быть смешана с цветами, пропорция регулируется кнопками клавиатуры.
3. Кубик с двумя смешанными текстурами. Пропорция должна регулироваться кнопками клавиатуры.
4. Градиентный круг (окружность проходит Hue из HSV, центр белый), который можно масштабировать по осям (каждую ось своей кнопкой).
   
Для передачи координат, цветов вершин и текстурных координат необходимо использовать VBO.

Для управления с клавиатуры необходимо передавать дополнительную информацию в шейдер с помощью uniform.

## Лабораторная работа № 13. Загрузка файлов, множественные объекты
Солнечная система

Загрузка моделей из файлов
Необходимо реализовать загрузку моделей из файлов (например в формате obj). Должны загржаться как минимум координаты вершин и текстурные координаты. Обратите внимание, что использовать стоит не шарики, пусть планетами будут что-нибудь неожиданное, порадуйте преподавателя своим воображением! (не меньше 100 полигонов).

Отрисовка множественных моделей
Необходимо отрисовать несколько (не менее пяти) экземпляров загруженного объекта в разных местах. При этом загружать данные в память нужно лишь один раз. На объекты должны быть наложена текстура в соответствии с текстурными координатами.

Движение по орбите

Сделать так, чтобы объекты выстроились в модель солнечной системы:

- В центре самый большой объект
- Вокруг него по круглым орбитам вращаются объекты поменьше (все разных размеров)
- Все объекты так же вращаются вокруг своей оси
  
Камера

Камера (с перспективной проекцией) должна уметь двигаться вперёд-назад/вверх-вниз (опционально вправо-влево). Её можно поворачивать вертикально и горизонтально (не забывайте, что для камеры "вперёд" -- это то, куда она смотрит).

## Лабораторная работа № 14. Освещение
Сцена

Произвольная сцена, состоящая из нескольких (минимум пяти) разных объектов. Они должны быть собраны в более или менее осмысленную композицию. На каждом объекте должны быть текстуры. Объекты вместе с нормалями должны парситься из файла.

Источники освещения

Для каждого источника света должны настраиваться положение (кроме направленного), интенсивность, направление и ширина конуса (при наличии). При освещении должны учитываться нормали полигонов.

1) Точечный источник света
Источник света, который светит из точки во все стороны (например лампочка).

2)  Направленный источник света (Глобальный )
Источник света находится бесконечно далеко, все лучи света направлены параллельно друг другу (например солнце).

3) Прожекторный источник света
Свет образует конус, направленный из точки в какую-то сторону (например фонарик).

Модели освещения

Каждый объект на сцене должен иметь свою модель освещения. Должны присутствовать следующие модели освещения:

1) Phong

2) Toon Shading

3) Любая другая модель из презентации (Кроме Блинна и Ламберта)

## Индивидуальное задание №3 — Почтовый дирижабль
**Лирика**

Делаем свою игру про доставку посылок. Игрок управляет дирижаблем, который летает над полем, выпуская посылки по целям.

**Комментарии**

Ключевое в этой работе — функционал, так что модель для дирижабля можно заменить чем угодно, при условии что это будет выглядеть достаточно осмысленно.

**Задание**

Максимально возможные баллы — 7 баллов + 5 бонусных

Обязательный минимум
В поле стоит новогодняя ёлка, над ней в небе летит дирижабль, камера располагается сзади сверху дирижабля, проекция — перспективная (должно быть видно не только дирижабль, но и землю под ним). Предусмотреть модели и текстуры для ёлки, поля и самого дирижабля. На сцене присутствует глобальное освещение — направленный источник света. [3 балла]

**Дополнительно**

Каждому студенту будет выдан вариант, который включает набор обязательных и набор бонусных заданий.

_**Варианты базовых заданий (у каждого свой набор)**_

Дирижабль летает по небу во всех направлениях, в том числе вверх и вниз (управление с клавиш). [+1 балл]

Камера следует за дирижаблем (вид о третьего лица) [+1 балл]

В поле находится несколько моделей — цели-домики (не меньше 5 экземпляров) и декорации (не меньше одного вида домика и двух видов декораций, расположение генерируется случайным образом). [+1 балл]

Дирижабль умеет сбрасывать посылки — объекты, летящие вниз. Когда посылка сталкивается с землёй — она (посылка) исчезает [+1 балл]

Когда посылка сталкивается с целью — цель исчезает, где-то засчитывается попадание. Для проверки столкновения двух объектов сравниваем расстояние между центрами этих объектов с суммой двух радиусов (у объекта есть радиус столкновения). [+1 балла]

После исчезновения цель появляется в новом случайном месте (она не должна пересекаться с другими целями). [+1 балла]

В небе должны быть расположены грозовые тучки (не меньше 5 экземпляров, расположение генерируется случайным образом) и воздушные шары. [+1 балл]

Добавить дирижаблю прожектор, который ярко освещает пространство под ним (прожекторный источники освещения). Источник света должен двигаться вместе с дирижаблем, прожектор можно включить и выключить кнопками с клавиатуры. [+1 балла]

Тучки периодически сверкают с использованием сияющего материала. [+1 балл]

Тучки самопроизвольно летают по какой-то траектории (для задания траектории используйте например тригонометрические функции). [+1 балл]

Цель для доставки посылки должны быть раскрашена как мишень, красными концентрическими кругами, сделанными при помощи фрагментного шейдера. Круги должны быть анимированы и двигаться к центру. [+1 балл]

На земле стоит несколько фонарей с точечным освещением [+1 балл]

Сани ездят вокруг ёлочки [+1 балл]

На каждую доставленную посылку, под ёлкой появляется один подарок (модели подарка и посылки должны отличаться) [+1 балл]

_**Варианты бонусных заданий (у каждого свой набор)**_

Лужайка сделана как террейн, то есть меш, высота которого в каждой точке задана текстурой. [+2 балл]

С помощью вершинного шейдера к некоторым объектам добавить лёгкое колыхание (развевающиеся флаги, колышущаяся ёлочка и др.) [+2 балл]

Наложить на дирижабль карту нормалей (normalmap). [+2 балл]

Наложить на домики карту освещения (lightmap). [+1 балл]

Сделать облака полупрозрачными. [+2 балл]

При нажатии кнопки можно переключить вид на камеру, располагающуюся в нижней части дирижабля (ражим прицеливания). [+1 балл]
